{
    "meta:license": [
    "Copyright 2019 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
    "$schema": "http://json-schema.org/draft-06/schema#",
    "$id": "https://ns.adobe.com/xdm/assets/usertask",
    "title": "User Task",
    "meta:extensible": true,
    "meta:extends": [
        "https://ns.adobe.com/xdm/assets/collabproperties"
    ],
    "description": "This model represents a user task.",
    "type": "object",
    "definitions": {
        "basetask": {
            "properties": {
                "collab:subtype": {
                    "title": "SubType",
                    "type": "string",
                    "description": "Subtype of the task eg. review",
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:filterable": true,
                        "search:store": "stored",
                        "search:sort": "sortedCaseSensitive"
                    }]
                },
                "collab:status": {
                    "type": "string",
                    "description": "Status of the Task",
                    "meta:enum": ["unassigned", "not_started", "in_progress", "blocked" , "canceled", "completed"],
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:filterable": true,
                        "search:store": "stored",
                        "search:sort": "sortedCaseSensitive"
                    }]
                },
                "collab:subStatus": {
                    "type": "string",
                    "description": "Sub-Status of a Task. When a user completes a task, she may wish to optionally record additional details",
                    "meta:enum": ["accepted", "rejected"],
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:filterable": true,
                        "search:store": "stored",
                        "search:sort": "sortedCaseSensitive"
                    }]
                },
                "collab:priority": {
                    "type": "number",
                    "description": "Priority of the Task. Higher value implies higher priority",
                    "default": 0,
                    "minimum": 0,
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:filterable": true
                    }]
                },
                "collab:percentComplete": {
                    "title": "Percent complete",
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Percentage of task completed."
                },
                "collab:startDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date and time in which the task was started."
                },
                "collab:endDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date and time in which the task was completed."
                },
                "collab:resources": {
                    "title": "Resources",
                    "description": "resources defines an array of items each of which is referenced by this task.",
                    "type": "array",
                    "minItems": 0,
                    "items": {
                        "$ref": "#/definitions/resource"
                    }
                }
            }
        },
        "resource": {
            "required": ["collab:source", "collab:subtype"],
            "properties": {
                "collab:source": {
                    "title": "Source",
                    "description": "This field represents the id-based URI for a platform resource that is referenced by a task.",
                    "type": "string",
                    "format": "uri",
                    "examples": ["https://platform-cs.adobe.io/file/repoid123/id/urn:aaid:cs:6c21c178-4870-4bb4-9dfa-bcf9655b5eb2"],
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:filterable": true,
                        "search:store": "stored"
                    }]
                },
                "collab:name": {
                    "type": "string",
                    "title": "Resource name",
                    "description": "a name for the resource. It could be same as xdm:name for the file name or be different"
                },
                "collab:subtype": {
                    "title": "Sub Type",
                    "type": "string",
                    "meta:enum": ["attachment", "reference"],
                    "meta:usereditable": false,
                    "description": "This field describes if the resource is attached to this task as an attachment or it is reference to another asset"
                },
                "collab:immutable": {
                    "title": "Immutable",
                    "type": "boolean",
                    "default": false,
                    "description": "This field describes if the reference is immutable or can be changed during lifetime of a task."
                }
            }
        },
        "usertask": {
            "properties": {
                "collab:creator": {
                    "title": "Creator",
                    "$ref": "https://ns.adobe.com/xdm/assets/collabproperties#/definitions/indexedprincipal",
                    "description": "Profile details of person who created this task."
                },
                "collab:assignee": {
                    "title": "Assignee",
                    "$ref": "https://ns.adobe.com/xdm/assets/collabproperties#/definitions/indexedprincipal",
                    "description": "Details of person who is assigned the task. In case assignee is not set, then collab:creator is the assignee"
                },
                "collab:assigneeMutableProperties": {
                    "title": "assignee mutable properties",
                    "description": "The task creator may whitelist specific properties that are editable by assignee. Task creator could use [\"*\"] to indicate that the assignee can modify all properties in a task.",
                    "type": "array",
                    "default": ["collab:status"],
                    "items": {
                        "type": "string"
                    }
                },
                "collab:parentTask": {
                    "title": "parentTask",
                    "description": "If the current task is a subtask, then this field represents the id-based URI for the parent task. If this task is not a subtask, then this field is not present",
                    "type": "string",
                    "format": "uri",
                    "examples": ["https://platform-cs.adobe.io/task/repoid123/id/urn:aaid:cs:6c21c178-4870-4bb4-9dfa-bcf9655b5eb2"]
                },
                "collab:dueDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date and time in which the task has to be completed.",
                    "meta:descriptors": [{
                        "@type": "xdm:searchdescriptor",
                        "search:indexed": true,
                        "search:store": "stored",
                        "search:sort": "sorted"
                    }]
                },                
                "collab:reminderDates": {
                    "type": "array",
                    "title": "Reminder dates",
                    "description": "Collection of reminder dates.",
                    "items": {
                        "properties": {
                            "reminderDate": {
                                "type": "string",
                                "format": "date-time",
                                "description": "Date and time in which a notification will be sent to assignee to complete the task."
                            }
                        }
                    }
                }
            }
        }
    },
    "allOf": [{
        "$ref": "https://ns.adobe.com/xdm/assets/collabproperties#/definitions/collabbody"
    }, {
        "$ref": "#/definitions/basetask"
    }, {
        "$ref": "#/definitions/usertask"
    }],
    "required": ["collab:creator"],
    "xdm:version": "1",
    "meta:status": "experimental"
}